<!DOCTYPE html>
<html>
<head>
    <title>
        LAMP CONTROLLER
    </title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
            padding: 10vw;
        }
        button {
            padding: 10px 30px;
            font-size: 16px;
            margin: 10px;
        }
    </style>
</head>

<body>
    <h1>
        Main Page
    </h1>
    <button id="btnOn">
        On
    </button>
    <button id="btnOff">
        Off
    </button>

    <script type="module">
        "use strict"
        import {CMD} from "./commandList.js";
        const ipAddress = "http://172.20.10.6";
        function sendCommand(command) {
            fetch(`${ipAddress}/${command}`).then(
                response => {
                    if (!response.ok) {
                        throw new Error("Response is not ok.");
                    }
                    // return response.text();
                    return response.json();
                }
            ).then(
                data => {
                    console.log("Message: ESP returns a message: ", data);
                }
            ).catch(
                error => {
                    console.error("Error: ", error);
                }
            )
        }

        document.getElementById("btnOn").addEventListener("click", () => sendCommand(CMD.ON));
        document.getElementById("btnOff").addEventListener("click", () => sendCommand(CMD.OFF));
    </script>
</body>
</html>